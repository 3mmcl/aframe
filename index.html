<!DOCTYPE html>
<html lang="en">
  <head>
    <script src="//aframe.io/releases/1.1.0/aframe.min.js"></script>
    <script src="https://cdn.jsdelivr.net/gh/c-frame/aframe-extras@7.6.0/dist/aframe-extras.min.js"></script>
    <script src="https://unpkg.com/aframe-event-set-component@5.x.x/dist/aframe-event-set-component.min.js"></script>
    <script src="https://unpkg.com/aframe-environment-component@1.0.0/dist/aframe-environment-component.min.js"></script>
    <script src="js/customFunctions.js"></script>

    <title>A-Frame</title>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  </head>

  <body>
    <a-scene
      inspector="url: https://cdn.jsdelivr.net/gh/aframevr/aframe-inspector@master/dist/aframe-inspector.min.js"
    >
      <!--preload-->
      <a-assets>
        <img id="poster1" src="assets/fishposter.jpg" />

        <a-asset-item id="fish" src="assets/fish.gltf"></a-asset-item>
        <a-asset-item id="ground" src="assets/enviro.gltf"></a-asset-item>
        <a-asset-item id="gmesh" src="assets/enviromesh.gltf"></a-asset-item>
      </a-assets>

      <a-entity id="rig" movement-controls="constrainToNavMesh:true" foo>
        <a-entity id="camera" camera position="-3 1.5 -3" look-controls>
          <a-cursor id="ring" color="#0BFBFF"></a-cursor>
        </a-entity>
      </a-entity>

      <!-- beaver -->
      <a-entity
        gltf-model="assets/beaver.gltf"
        position="-1 0 -2"
        shadow="cast: true"
      >
      </a-entity>

      <!-- fish -->
      <a-entity
        gltf-model="#fish"
        position="-1 0 -1"
        animation__rotate="property: rotation; dir: forward; dur: 1000;
                                 easing: easeInSine; loop: false; to: 0 90 0;
                                 startEvents:click"
        event-set__mouseenter="_target:#ring; color:#FB0BFF; scale:1.5 1.5 1.5"
        event-set__mouseleave="_target:#ring; color:#0BFBFF; scale:1 1 1"
      >
      </a-entity>

      <a-box
        id="fishposter"
        geometry="primitive: box; height:1.5; width:1; depth:0.01;"
        material="shader: flat; src:#poster1"
        position="1.2 1.6 -0.7"
        rotation="0 130 0"
        animation__reveal="property:position; to: 2.1 1.2 1.2; dur: 2000; startEvents:runP1Animation;"
        animation__hide="property:position; to: 2.1 -1.2 1.2; dur: 2000; startEvents:click;"
      >
      </a-box>

      <a-entity
        id="theBook"
        gltf-model="#gmesh"
        position="2.5 1.25 0.3"
        scale="0.1 0.1 0.1"
        rotation="85 -7 85"
        shadow="cast: true"
        sound="src:#bookSound; autoplay:false"
        trigger-poster1-click
      ></a-entity>

      <!-- environment -->
      <a-entity
        gltf-model="#ground"
        shadow="receive:true; cast: true"
        rotation="0 180 0"
      ></a-entity>
      <a-entity
        light="type: point; color:#E6E6E6; intensity:10"
        position="0.4 2.3 -5.817"
        geometry="primitive:sphere; radius:0.2;"
        material="shader:flat"
      ></a-entity>
      <a-entity
        nav-mesh
        gltf-model="#gmesh"
        rotation="0 180 0"
        position="0 -0.5 0"
        visible="false"
      ></a-entity>
      <a-sky color="#87CEEB"></a-sky>
    </a-scene>
  </body>
</html>
